<ion-header>
  <ion-toolbar>
    <ion-title>Perfil</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="logout()">
        <ion-icon slot="icon-only" name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Foto de perfil -->
  <div class="profile-photo-container">
    <img [src]="profilePhoto" alt="Foto de perfil" class="profile-photo" />
  </div>

  <!-- Opciones para cargar o tomar foto -->
  <div class="button-group">
    <ion-button expand="block" color="primary" (click)="takePhoto()">
      Tomar una foto
    </ion-button>
    <ion-button expand="block" color="secondary" (click)="selectPhoto()">
      Subir desde la galería
    </ion-button>
  </div>

   <!-- Formulario de edición -->
   <form (ngSubmit)="onSubmit()" #profileForm="ngForm">
    <ion-item>
      <ion-label position="floating">Nombre</ion-label>
      <ion-input type="text" [(ngModel)]="name" readonly></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Apellido</ion-label>
      <ion-input type="text" [(ngModel)]="surname" readonly></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Contraseña Nueva</ion-label>
      <ion-input
        type="password"
        required
        [(ngModel)]="newPassword"
        name="newPassword"
        minlength="6"
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Confirmar Contraseña</ion-label>
      <ion-input
        type="password"
        required
        [(ngModel)]="confirmPassword"
        name="confirmPassword"
        minlength="6"
      ></ion-input>
    </ion-item>

    <ion-button
      expand="block"
      color="success"
      type="submit"
      [disabled]="profileForm.invalid || !passwordsMatch()"
    >
      Guardar Cambios
    </ion-button>

    <ion-button
  expand="block"
  color="tertiary"
  (click)="goToChat()"
>
  Regresar al Chat
</ion-button>
  </form>
</ion-content>
